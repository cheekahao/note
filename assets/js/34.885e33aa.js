(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{301:function(t,s,e){"use strict";e.r(s);var a=e(10),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"代理和反射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代理和反射"}},[t._v("#")]),t._v(" 代理和反射")]),t._v(" "),s("p",[t._v("代理(Proxy)是一种可以拦截并改变底层"),s("code",[t._v("JavaScript")]),t._v("引擎操作的包装器。")]),t._v(" "),s("blockquote",[s("p",[t._v("在"),s("code",[t._v("ES6")]),t._v("中数组被认为是奇异对象(exotic object)")])]),t._v(" "),s("p",[t._v("调用"),s("code",[t._v("new Proxy")]),t._v("可创建目标(target)对象的代理，他虚拟化了目标，二者看起来功能一致。")]),t._v(" "),s("p",[t._v("代理可以拦截"),s("code",[t._v("JavaScript")]),t._v("引擎内部目标的底层对象操作，会触发对应的陷阱函数")]),t._v(" "),s("p",[t._v("反射"),s("code",[t._v("API")]),t._v("以"),s("code",[t._v("Reflect")]),t._v("对象的形式出现，对象中方法的默认特性与相同的底层操作一直，代理可以覆写这些操作，每个代理陷阱都对应一个命名和参数相同的"),s("code",[t._v("Reflect")]),t._v("方法")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("代理陷阱")]),t._v(" "),s("th",[t._v("覆写的特性")]),t._v(" "),s("th",[t._v("默认特性")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("get")])]),t._v(" "),s("td",[t._v("读取一个属性值")]),t._v(" "),s("td",[s("code",[t._v("Reflect.get()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("set")])]),t._v(" "),s("td",[t._v("写入一个属性值")]),t._v(" "),s("td",[s("code",[t._v("Reflect.set()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("has")])]),t._v(" "),s("td",[s("code",[t._v("in")]),t._v("操作符")]),t._v(" "),s("td",[s("code",[t._v("Reflect.has()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("deleteProperty")])]),t._v(" "),s("td",[s("code",[t._v("delete")]),t._v("操作符")]),t._v(" "),s("td",[s("code",[t._v("Reflect.deleteProperty()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("getPrototypeOf")])]),t._v(" "),s("td",[s("code",[t._v("Object.getPrototypeOf()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.getPrototypeOf()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("setPrototypeOf")])]),t._v(" "),s("td",[s("code",[t._v("Object.setPrototypeOf()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.setPrototypeOf()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("isExtensible")])]),t._v(" "),s("td",[s("code",[t._v("Object.isExtensible()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.isExtensible()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("preventExtensions")])]),t._v(" "),s("td",[s("code",[t._v("Object.preventExtensions()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.preventExtensions()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("getOwnPropertyDescriptor")])]),t._v(" "),s("td",[s("code",[t._v("Object.getOwnPropertyDescriptor()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.getOwnPropertyDescriptor()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("defineProperty")])]),t._v(" "),s("td",[s("code",[t._v("Object.defineProperty()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.defineProperty()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("ownKeys")])]),t._v(" "),s("td",[s("code",[t._v("Object.keys()")]),t._v("、"),s("code",[t._v("Object.getOwnPropertyNames()")]),t._v("和、"),s("code",[t._v("Object.getOwnPropertySymbols()")])]),t._v(" "),s("td",[s("code",[t._v("Reflect.ownKeys()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("apply")])]),t._v(" "),s("td",[t._v("调用一个函数")]),t._v(" "),s("td",[s("code",[t._v("Reflect.apply()")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("construct")])]),t._v(" "),s("td",[t._v("用"),s("code",[t._v("new")]),t._v("调用一个函数")]),t._v(" "),s("td",[s("code",[t._v("Reflect.construct()")])])])])]),t._v(" "),s("h2",{attrs:{id:"代理的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代理的使用"}},[t._v("#")]),t._v(" 代理的使用")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" proxy "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * \n     * @param {Object}          trapTarget  接受属性的被代理的目标对象，本例中的target\n     * @param {String, Symbol}  key         要写入的属性键值\n     * @param {*}               value       要写入的属性键值\n     * @param {Object}          receiver    代理对象，本例中的proxy\n     */")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapTarget "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true 'name' 'proxy' true")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("属性 ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" 不存在")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nproxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"proxy"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "proxy"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "proxy"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])]),s("h2",{attrs:{id:"浏览器支持程度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器支持程度"}},[t._v("#")]),t._v(" 浏览器支持程度")]),t._v(" "),s("p",[t._v("49以上版本Chrome支持"),s("code",[t._v("Proxy")]),t._v("。"),s("code",[t._v("IE")]),t._v("浏览器不支持。")])])}),[],!1,null,null,null);s.default=n.exports}}]);