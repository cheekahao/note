<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS拾遗 | 前端笔记</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="learning notebook of cheeka">
    
    <link rel="preload" href="/assets/css/0.styles.89a87d7c.css" as="style"><link rel="preload" href="/assets/js/app.4ffcedcb.js" as="script"><link rel="preload" href="/assets/js/3.a213aa8f.js" as="script"><link rel="preload" href="/assets/js/36.8b840a3d.js" as="script"><link rel="prefetch" href="/assets/js/10.3c347e54.js"><link rel="prefetch" href="/assets/js/11.9adc9c77.js"><link rel="prefetch" href="/assets/js/12.c74c6a2c.js"><link rel="prefetch" href="/assets/js/13.9bfac093.js"><link rel="prefetch" href="/assets/js/14.8201ea59.js"><link rel="prefetch" href="/assets/js/15.b893f62b.js"><link rel="prefetch" href="/assets/js/16.fe2643ba.js"><link rel="prefetch" href="/assets/js/17.7711ce1c.js"><link rel="prefetch" href="/assets/js/18.8355d792.js"><link rel="prefetch" href="/assets/js/19.10d660f8.js"><link rel="prefetch" href="/assets/js/20.b252f2f1.js"><link rel="prefetch" href="/assets/js/21.72cd72b5.js"><link rel="prefetch" href="/assets/js/22.36e20d02.js"><link rel="prefetch" href="/assets/js/23.36e1d6bf.js"><link rel="prefetch" href="/assets/js/24.fa1933ff.js"><link rel="prefetch" href="/assets/js/25.7e9f2526.js"><link rel="prefetch" href="/assets/js/26.502733bd.js"><link rel="prefetch" href="/assets/js/27.37687208.js"><link rel="prefetch" href="/assets/js/28.47ac5267.js"><link rel="prefetch" href="/assets/js/29.2ea8973e.js"><link rel="prefetch" href="/assets/js/30.63a8a364.js"><link rel="prefetch" href="/assets/js/31.a0e0a094.js"><link rel="prefetch" href="/assets/js/32.3ffc993b.js"><link rel="prefetch" href="/assets/js/33.53d493cc.js"><link rel="prefetch" href="/assets/js/34.885e33aa.js"><link rel="prefetch" href="/assets/js/35.0b5bb67c.js"><link rel="prefetch" href="/assets/js/37.c9149af4.js"><link rel="prefetch" href="/assets/js/38.af7e0ce7.js"><link rel="prefetch" href="/assets/js/39.4d90f037.js"><link rel="prefetch" href="/assets/js/4.212f9d7f.js"><link rel="prefetch" href="/assets/js/40.3272e3fd.js"><link rel="prefetch" href="/assets/js/5.9d6b8bce.js"><link rel="prefetch" href="/assets/js/6.f8a656cd.js"><link rel="prefetch" href="/assets/js/7.26d11c39.js"><link rel="prefetch" href="/assets/js/8.365efa03.js"><link rel="prefetch" href="/assets/js/9.60a6bc0a.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.d4b5f89a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.89a87d7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
    首页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/css.html" class="nav-link">
    css
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/es6/" class="nav-link">
    ES6
  </a></li><li class="dropdown-item"><!----> <a href="/javascript/omission.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
    JS拾遗
  </a></li><li class="dropdown-item"><!----> <a href="/javascript/ts.html" class="nav-link">
    TypeScript
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/vue.html" class="nav-link">
    Vue
  </a></li><li class="dropdown-item"><!----> <a href="/framework/vue3/" class="nav-link">
    Vue3源码解读
  </a></li><li class="dropdown-item"><!----> <a href="/framework/react.html" class="nav-link">
    React
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络" class="mobile-dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/network/http.html" class="nav-link">
    HTTP
  </a></li><li class="dropdown-item"><!----> <a href="/network/caching.html" class="nav-link">
    缓存
  </a></li></ul></div></div><div class="nav-item"><a href="/engineering/" class="nav-link">
    工程化
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advance/functional.html" class="nav-link">
    函数式编程
  </a></li><li class="dropdown-item"><!----> <a href="/advance/patterns.html" class="nav-link">
    设计模式
  </a></li><li class="dropdown-item"><!----> <a href="/advance/architecture.html" class="nav-link">
    软件架构
  </a></li><li class="dropdown-item"><!----> <a href="/advance/algorithm.html" class="nav-link">
    数据结构
  </a></li><li class="dropdown-item"><!----> <a href="/advance/leet_code.html" class="nav-link">
    LeetCode
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/garbage-collection.html" class="nav-link">
    垃圾回收
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学" class="dropdown-title"><span class="title">计算机科学</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学" class="mobile-dropdown-title"><span class="title">计算机科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/program.html" class="nav-link">
    程序是怎么跑起来的
  </a></li><li class="dropdown-item"><!----> <a href="/cs/compiler.html" class="nav-link">
    编译原理
  </a></li></ul></div></div><div class="nav-item"><a href="https://github.com/cheekahao/learning" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
    首页
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe/css.html" class="nav-link">
    css
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/es6/" class="nav-link">
    ES6
  </a></li><li class="dropdown-item"><!----> <a href="/javascript/omission.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
    JS拾遗
  </a></li><li class="dropdown-item"><!----> <a href="/javascript/ts.html" class="nav-link">
    TypeScript
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/vue.html" class="nav-link">
    Vue
  </a></li><li class="dropdown-item"><!----> <a href="/framework/vue3/" class="nav-link">
    Vue3源码解读
  </a></li><li class="dropdown-item"><!----> <a href="/framework/react.html" class="nav-link">
    React
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="网络" class="mobile-dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/network/http.html" class="nav-link">
    HTTP
  </a></li><li class="dropdown-item"><!----> <a href="/network/caching.html" class="nav-link">
    缓存
  </a></li></ul></div></div><div class="nav-item"><a href="/engineering/" class="nav-link">
    工程化
  </a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="进阶" class="dropdown-title"><span class="title">进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="进阶" class="mobile-dropdown-title"><span class="title">进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advance/functional.html" class="nav-link">
    函数式编程
  </a></li><li class="dropdown-item"><!----> <a href="/advance/patterns.html" class="nav-link">
    设计模式
  </a></li><li class="dropdown-item"><!----> <a href="/advance/architecture.html" class="nav-link">
    软件架构
  </a></li><li class="dropdown-item"><!----> <a href="/advance/algorithm.html" class="nav-link">
    数据结构
  </a></li><li class="dropdown-item"><!----> <a href="/advance/leet_code.html" class="nav-link">
    LeetCode
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/garbage-collection.html" class="nav-link">
    垃圾回收
  </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学" class="dropdown-title"><span class="title">计算机科学</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学" class="mobile-dropdown-title"><span class="title">计算机科学</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/program.html" class="nav-link">
    程序是怎么跑起来的
  </a></li><li class="dropdown-item"><!----> <a href="/cs/compiler.html" class="nav-link">
    编译原理
  </a></li></ul></div></div><div class="nav-item"><a href="https://github.com/cheekahao/learning" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/javascript/omission.html" aria-current="page" class="active sidebar-link">JS拾遗</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/omission.html#object-create详解" class="sidebar-link">Object.create详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/omission.html#object-create是什么" class="sidebar-link">Object.create是什么</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#object-create-null-与-的区别" class="sidebar-link">Object.create(null)与{}的区别</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#object-setprototypeof" class="sidebar-link">Object.setPrototypeOf</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#new操作符模拟实现" class="sidebar-link">new操作符模拟实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/omission.html#new操作符都做了什么" class="sidebar-link">new操作符都做了什么：</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#new操作符和object-create的区别" class="sidebar-link">new操作符和Object.create的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#js继承" class="sidebar-link">JS继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/omission.html#原型链继承" class="sidebar-link">原型链继承</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#借用构造函数继承" class="sidebar-link">借用构造函数继承</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#原型链-借用构造函数的组合继承" class="sidebar-link">原型链+借用构造函数的组合继承</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#组合继承优化" class="sidebar-link">组合继承优化</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#组合继承优化2" class="sidebar-link">组合继承优化2</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#es6-extends" class="sidebar-link">ES6 extends</a></li></ul></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#null和undfined" class="sidebar-link">null和undfined</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#不可变的原始值和可变的对象引用" class="sidebar-link">不可变的原始值和可变的对象引用</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#javascript类型转换" class="sidebar-link">JavaScript类型转换</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#作为属性的变量" class="sidebar-link">作为属性的变量</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#严格判断数组" class="sidebar-link">严格判断数组</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#存取器属性" class="sidebar-link">存取器属性</a></li><li class="sidebar-sub-header"><a href="/javascript/omission.html#函数的length属性与arguments-length" class="sidebar-link">函数的length属性与arguments.length</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js拾遗"><a href="#js拾遗" class="header-anchor">#</a> JS拾遗</h1> <h2 id="object-create详解"><a href="#object-create详解" class="header-anchor">#</a> <code>Object.create</code>详解</h2> <h3 id="object-create是什么"><a href="#object-create是什么" class="header-anchor">#</a> <code>Object.create</code>是什么</h3> <p><code>Object.create</code>的作用是使用指定的原型和属性来创建一个对象。有两个形参：</p> <ul><li>指定的原型<code>proto</code></li> <li>一个可选参数<code>descriptors</code>，属性描述符</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// {}</span>
Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 相当于Object.defineProperties(Object.create(proto), descriptors)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="object-create-null-与-的区别"><a href="#object-create-null-与-的区别" class="header-anchor">#</a> <code>Object.create(null)</code>与<code>{}</code>的区别</h3> <p><code>Object.create(null)</code>不继承任何原型方法，<code>Object.create</code>用于创建一个新对象，其中第一个参数为这个对象的原型，而由于<code>null</code>没有原型，所以该方法不继承<code>Object.prototype</code>。</p> <p>因此，<code>{}</code>等同于<code>Object.create(Object.prototype)</code>。</p> <p>可以用以下代码模拟<code>Object.create</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">proto</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    fn<span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto<span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="object-setprototypeof"><a href="#object-setprototypeof" class="header-anchor">#</a> <code>Object.setPrototypeOf</code></h3> <p><code>ES6</code>新增了<code>Object.setPrototypeOf</code>，用于设置一个指定的对象的原型 ( 即内部<code>[[Prototype]]</code>属性）到另一个对象或 <code>null</code>。</p> <p><code>Object.setPrototypeOf(obj, prototype)</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ployfill</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// 仅适用于Chrome和FireFox，在IE中不工作：</span>
Object<span class="token punctuation">.</span>setPrototypeOf <span class="token operator">=</span> Object<span class="token punctuation">.</span>setPrototypeOf <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> proto</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto<span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="new操作符模拟实现"><a href="#new操作符模拟实现" class="header-anchor">#</a> <code>new</code>操作符模拟实现</h2> <h3 id="new操作符都做了什么"><a href="#new操作符都做了什么" class="header-anchor">#</a> <code>new</code>操作符都做了什么：</h3> <ul><li>创建了一个全新的对象</li> <li>这个对象会被执行<code>[[Prototype]]</code>（也就是<code>__proto__</code>）链接</li> <li>生成的新对象会绑定到函数调用的<code>this</code></li> <li>通过new创建的每个对象将最终被<code>[[Prototype]]</code>链接到这个函数的<code>prototype</code>对象上</li> <li>如果函数没有返回对象类型<code>Object</code>(包含<code>Functoin</code>, <code>Array</code>, <code>Date</code>, <code>RegExg</code>, <code>Error</code>)，那么<code>new</code>表达式中的函数调用会自动返回这个新的对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_new</span><span class="token punctuation">(</span><span class="token parameter">ctor<span class="token punctuation">,</span> <span class="token operator">...</span>arguments</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// ES6 new.target 是指向构造函数</span>
    _new<span class="token punctuation">.</span>target <span class="token operator">=</span> ctor<span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> instance <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>ctor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ctorReturnResult <span class="token operator">=</span> <span class="token function">ctor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">const</span> isObject <span class="token operator">=</span> <span class="token keyword">typeof</span> ctorReturnResult <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> ctorReturnResult <span class="token operator">!==</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> isFunction <span class="token operator">=</span> <span class="token keyword">typeof</span> ctorReturnResult <span class="token operator">===</span> <span class="token string">'function'</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>isObject <span class="token operator">||</span> isFunction<span class="token punctuation">)</span> <span class="token keyword">return</span> ctorReturnResult
    
    <span class="token keyword">return</span> instance
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="new操作符和object-create的区别"><a href="#new操作符和object-create的区别" class="header-anchor">#</a> <code>new</code>操作符和<code>Object.create</code>的区别</h3> <p><code>new</code>操作符将父类的属性和方法全都赋给子类</p> <p><code>Object.create</code>只修改原型</p> <h2 id="js继承"><a href="#js继承" class="header-anchor">#</a> <code>JS</code>继承</h2> <h3 id="原型链继承"><a href="#原型链继承" class="header-anchor">#</a> 原型链继承</h3> <p><strong>特点：</strong></p> <ul><li>父类新增原型方法/原型属性，子类都能访问到</li> <li>简单，易于实现</li></ul> <p><strong>缺点：</strong></p> <ul><li>无法实现多继承</li> <li>来自原型对象的所有属性被所有实例共享</li> <li>创建子类实例时，无法向父类构造函数传参</li> <li>要想为子类新增属性和方法，必须要在<code>inherits</code>之后执行，不能放到构造器中</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_inherits</span><span class="token punctuation">(</span><span class="token parameter">Child<span class="token punctuation">,</span> Parent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>问题</strong></p> <p><em>父类的私有属性中有引用类型的属性，那它被子类继承的时候会作为公有属性，这样子类1操作这个属性的时候，就会影响到子类2。</em></p> <h3 id="借用构造函数继承"><a href="#借用构造函数继承" class="header-anchor">#</a> 借用构造函数继承</h3> <p>在子类型构造函数中通用<code>call()</code>调用父类型构造函数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>  <span class="token comment">// 相当于: this.Person(name, age)</span>
    <span class="token comment">/*this.name = name
    this.age = age*/</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
<span class="token punctuation">}</span>
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>特点：</strong></p> <ul><li>解决了原型链继承中子类实例共享父类引用属性的问题</li> <li>创建子类实例时，可以向父类传递参数</li> <li>可以实现多继承(call多个父类对象)</li></ul> <p><strong>缺点：</strong></p> <ul><li>实例并不是父类的实例，只是子类的实例</li> <li>只能继承父类的实例属性和方法，不能继承原型属性和方法</li> <li>无法实现函数复用，每个子类都有父类实例函数的副本，影响性能</li></ul> <h3 id="原型链-借用构造函数的组合继承"><a href="#原型链-借用构造函数的组合继承" class="header-anchor">#</a> 原型链+借用构造函数的组合继承</h3> <p>通过调用父类构造，继承父类的属性并保留传参的优点，然后通过将父类实例作为子类原型，实现函数复用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setScore</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token comment">//组合继承也是需要修复构造函数指向的</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>优点：</strong></p> <ul><li>可以继承实例属性/方法，也可以继承原型属性/方法</li> <li>不存在引用属性共享问题</li> <li>可传参</li> <li>函数可复用
<strong>缺点：</strong>
调用了两次父类构造函数，生成了两份实例</li></ul> <h3 id="组合继承优化"><a href="#组合继承优化" class="header-anchor">#</a> 组合继承优化</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setScore</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>优点：</strong></p> <p>不会初始化两次实例方法/属性，避免的组合继承的缺点</p> <p><strong>缺点：</strong></p> <p>没办法辨别是实例是子类还是父类创造的，子类和父类的构造函数指向是同一个。</p> <h3 id="组合继承优化2"><a href="#组合继承优化2" class="header-anchor">#</a> 组合继承优化2</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setScore</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token comment">//核心代码</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token comment">//核心代码</span>
<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="es6-extends"><a href="#es6-extends" class="header-anchor">#</a> <code>ES6 extends</code></h3> <p><strong>组合式继承</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_inherits</span><span class="token punctuation">(</span><span class="token parameter">Child<span class="token punctuation">,</span> Parent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Object.create</span>
    <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// __proto__</span>
    <span class="token comment">// Child.prototype.__proto__ = Parent.prototype;</span>
    <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span>
    <span class="token comment">// ES6</span>
    <span class="token comment">// Object.setPrototypeOf(Child, Parent);</span>
    <span class="token comment">// __proto__</span>
    Child<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="null和undfined"><a href="#null和undfined" class="header-anchor">#</a> <code>null</code>和<code>undfined</code></h2> <p><code>null</code>是<code>JavaScript</code>的关键字，用来描述空值。因为<code>typeof null == &quot;object&quot;</code>，可将<code>null</code>不严谨的认为成一种特殊的对象，即非对象。这是是一个历史悠久的 <code>bug</code>，就是在<code>JS</code>的最初版本中<code>null</code>的内存存储信息是<code>000</code>开头的，而<code>000</code>开头的会被判断为<code>Object</code>类型。</p> <p>实际上，<code>null</code>是<code>JavaScript</code>的基本类型之一，表示数字、字符串、对象等是无值的。</p> <p><code>undefined</code>用以表示更深层次的空值，即未定义。是变量的一种取值，表明变量未被初始化。若查询对象的属性，数组元素等返回<code>undefined</code>，也说明属性或元素不存在。<code>undefined</code>是预定义的全局变量，但不是<code>JavaScript</code>关键字。在<code>ECMAScript 3</code>中是可读写的，可以被赋予任何值，在<code>ECMAScript 5</code>中是只读的。</p> <p><code>null == undefined</code>为真，要严格判断需要用<code>===</code>。另外，<code>null</code>和<code>undefined</code>都不包含任何属性和方法，也没有包装对象。</p> <h2 id="不可变的原始值和可变的对象引用"><a href="#不可变的原始值和可变的对象引用" class="header-anchor">#</a> 不可变的原始值和可变的对象引用</h2> <p>JavaScript中的原始值（<code>undefined</code>、<code>null</code>、布尔值、数字和字符串）是不可更改的：任何方法都无法更改（或“突变”）一个原始值。<strong>字符串中所有的方法都会返回一个新的字符串值。</strong></p> <p>原始值的比较是值的比较：只有在它们的值相等时它们才相等。比较两个字符串，当且仅当它们的长度相等且每个索引的字符都相等时，<code>JavaScript</code>才认为它们相等。</p> <p>对象的比较并非值的比较：即使两个对象包含同样的属性及相同的值，它们也是不相等的。同样，各个索引元素完全相等的两个数组也不相等。对象值都是引用（reference），对象的比较是引用的比较：<strong>当且仅当引用同一个基对象时才相等</strong>。因此，对象又被称为引用类型（referencetype），以此与基本类型做区分。</p> <h2 id="javascript类型转换"><a href="#javascript类型转换" class="header-anchor">#</a> <code>JavaScript</code>类型转换</h2> <p><strong>转为布尔值</strong></p> <p><code>null</code>、<code>undfined</code>、<code>&quot;&quot;</code>、<code>0</code>、<code>-0</code>、<code>NaN</code>这6个转为<code>false</code>，其他的都会转为<code>true</code>。<code>false</code>又和这6个值被称为“假值”（falsy value），其他值称做“真值”（truthy value）。</p> <p>包装对象也会被转换成<code>true</code>，所以<code>new Boolean(false) == true</code></p> <p><strong>转为数字</strong></p> <ul><li>以数字表示的字符串可以直接转换为数字，也允许在开始和结尾处带有空格，但有任意非空格字符的字符串都会转为<code>NaN</code>。</li> <li>空字符串<code>&quot;&quot;</code>会被转换为0</li> <li><code>null</code>转为0，<code>undefined</code>转为<code>NaN</code></li> <li><code>true</code>转换为1，<code>false</code>也会被转换为0</li> <li>空数组会被转换为0，只有一个数字元素的数组例如[2]或者其他唯一一个可以被会被转成数字的字符串，会被转换成对应的数字。而唯一的布尔值元素数组不会被转换为数字。</li></ul> <p>通过<code>Number()</code>将字符串转为数字时，只能基于十进制数进行转换，并且不能出现非法的尾随字符。<code>parseInt()</code>和<code>parseFloat()</code>都会跳过任意数量的前导空格，尽可能解析更多数值字符，并忽略后面的内容，如果第一个非空格字符是非法的数字直接量，将返回NaN。另外，<code>parseInt()</code>可以接收第二个可选参数，这个参数指定数字转换的基数，合法的取值范围是2～36。</p> <p><strong>转为对象</strong></p> <p>如果试图把<code>null</code>或<code>undefined</code>转换为对象会抛出一个类型错误（TypeError）。Object()函数在这种情况下不会抛出异常：仅简单地返回一个新创建的空对象。</p> <p><strong>转为字符串</strong></p> <p><code>Number</code>类的<code>toString()</code>方法可以接收表示转换基数（radix）的可选参数，如果不指定，默认转换成十进制。进制基数范围应该在2～36之间。</p> <p>数字转字符串需要控制小数点的有效数字位数时，可用以下三个方法。<code>toFixed()</code>任何时候都不会使用指数记数法；<code>toExponential()</code>则将数字转换为指数形式的字符串，其中小数点前只有一位，小数点后的位数则由参数指定；<code>toPrecision()</code>根据指定的有效数字位数将数字转换成字符串。这三个方法都会适当地进行四舍五入或者填充0。</p> <p><strong>对象转换为原始值</strong></p> <p>对象到字符串（object-to-string）和对象到数字（object-to-number）的转换是通过调用待转换对象的<code>toString</code>方法或valueOf方法来完成的。</p> <p><em><code>toString</code></em></p> <ul><li>对象默认的toString方法返回一个反映这个对象的字符串<code>&quot;[object Object]&quot;</code>。</li> <li>数组的<code>toString</code>方法将每个数组元素转换为一个字符串，其接受一个参数定义分隔符，默认值是逗号<code>,</code>。具体实现就是由数组中的每个元素的<code>toString</code>返回值经调用<code>join</code> 方法连接（由逗号隔开）组成。</li> <li>函数<code>toString</code>方法返回函数的<code>JavaScript</code>源代码字符串。</li> <li>日期的<code>toString</code>方法返回一个可读的（可被<code>JavaScript</code>解析的）日期和时间字符串。</li> <li>RegExp类的<code>toString</code>方法返回表示正则表达式直接量的字符串。</li></ul> <p><em><code>valueOf</code></em></p> <p><code>valueOf</code>方法主要作用是，如果存在任意原始值，就将其转换为表示它的原始值。对象默认的<code>valueOf</code>方法简单地返回对象本身。数组、函数和正则表达式等与之相同。只有日期类不同，<code>valueOf</code>方法会返回一个内部表示：1970年1月1日以来的毫秒数。</p> <p>鉴于日期类的特殊性，运算符<code>+</code>、==、!=和比较运算符，需要同类型，所以在需要转化成数字的情况下，会调用日期类的<code>toString</code>方法，需要数字的情况下调用<code>valueOf</code>方法。其他运算符的类型转换都是决定的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 + new Date() //调用toString
new Date() + 1  //调用toString
+ new Date() //调用valueOf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="作为属性的变量"><a href="#作为属性的变量" class="header-anchor">#</a> 作为属性的变量</h2> <p>当声明一个JavaScript全局变量时，实际上是定义了全局对象的一个属性</p> <p>命名函数的函数名在该函数内部是一个常量，不能被再次赋值，再次赋值时，严格模式下会报错，非严格模式下会静默失败。</p> <h2 id="严格判断数组"><a href="#严格判断数组" class="header-anchor">#</a> 严格判断数组</h2> <p><code>Array.isArray()</code>是ES5的方法，可以用<code>Object.prototype.toString.call(arr) === '[object Array]'</code>来进行polyfill。</p> <h2 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> <code>instanceof</code></h2> <p><code>instanceof</code>通过判断对象的原型链中是不是能找到类型的 <code>prototype</code>。<code>instanceof</code>的右侧必须为一个对象，否则会报错</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">''</span> <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// false 检查原型链会找到 undefined</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token keyword">var</span> myString  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newStr    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;String created with constructor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myDate    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myObj     <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myNonObj  <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myDate <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>   <span class="token comment">// 返回 true</span>
myNonObj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false, 一种创建非 Object 实例的对象的方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>怪异的是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>并且<code>instanceof</code>无法跨<code>iframes</code>判断数组：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span><span class="token punctuation">;</span>
xArray <span class="token operator">=</span> window<span class="token punctuation">.</span>frames<span class="token punctuation">[</span>window<span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Array<span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">xArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1,2,3]</span>

<span class="token comment">// Correctly checking for Array</span>
Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// Considered harmful, because doesn't work though iframes</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="存取器属性"><a href="#存取器属性" class="header-anchor">#</a> 存取器属性</h2> <p>对象的属性有数据属性和存取器属性两种：</p> <p><strong>数据属性</strong>，包含的一个数据值的位置，可以对数据值进行读写。包含四个特性：</p> <ul><li><p><code>configurable</code>: 表示属性是否可配置，即能否通过<code>delete</code>删除属性从而重新定义属性，能否修改属性的特性，或能否把属性修改为访问器属性，默认为true</p></li> <li><p><code>enumerable</code>: 可枚举性，表示能否通过<code>for-in</code>循环返回属性</p></li> <li><p><code>writable</code>：可写性，表示能否修改属性的值</p></li> <li><p><code>value</code>: 包含该属性的数据值。默认为undefined</p></li></ul> <p><strong>存取器属性</strong>，<code>accessor property</code>，又称访问器属性，不同于数据属性，包含的是一对<code>get</code>和<code>set</code>方法。在读取属性时调用<code>get</code>函数，在写入属性时调用<code>set</code>函数，因此<code>get</code>和<code>set</code>方法分别代替了数据属性的<code>value</code>和<code>writable</code>特性</p> <h2 id="函数的length属性与arguments-length"><a href="#函数的length属性与arguments-length" class="header-anchor">#</a> 函数的length属性与arguments.length</h2> <p>函数的<code>length</code>属性指函数定义时所声明的形参的个数，而<code>arguments.length</code>表示的是函数调用时，实参的个数。</p> <p>实际调用函数时，传入的参数的个数可以比形参的个数少，也可以比它多。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4ffcedcb.js" defer></script><script src="/assets/js/3.a213aa8f.js" defer></script><script src="/assets/js/36.8b840a3d.js" defer></script>
  </body>
</html>
